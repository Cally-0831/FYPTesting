<div>
    <% if (req.session.role=="stu" ){%>
        <p>this is a student</p>
        <div class="rows is-mobile">
            <div class="row">
                <div class="columns is-multiline is-mobile">
                    <div class="imgcolumn">
                        <a href="/notice">
                            <img src="..\images\home\notice.jpg" class="gallery_img">
                        </a>
                    </div>

                    <div class="imgcolumn">
                        <a href="/timetable">
                            <img src="..\images\home\ttb.jpg" class="gallery_img">
                        </a>
                    </div>
                    <div class="imgcolumn">
                        <a onclick="checkrequestdeadline('<%=req.session.role%>')">
                            <img src="..\images\home\question.jpg" class="gallery_img">
                        </a>
                    </div>
                    <div class="imgcolumn">
                        <a href="/checkrequest">
                            <img src="..\images\home\reply.jpg" class="gallery_img">
                        </a>
                    </div>
                    <div class="imgcolumn">
                        <a onclick="checktimecome()">
                            <img src="..\images\home\canlendar.jpg" class="gallery_img">
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <%}else if(req.session.role=="sup" ) {%>
            <p>this is a supervisor</p>
            <div class="rows is-mobile">
                <div class="row">
                    <div class="columns  is-multiline is-mobile">
                        <div class="imgcolumn">
                            <a href="/notice">
                                <img src="..\images\home\notice.jpg" class="gallery_img">
                            </a>
                        </div>
                        
                        <div class="imgcolumn">
                            <a href="/uploadstudentlist">
                                <img src="..\images\home\list.jpg" class="gallery_img">
                            </a>
                        </div>
                        <div class="imgcolumn">
                            <a href="/listuser">
                                <img src="..\images\home\liststudent.jpg" class="gallery_img">
                            </a>
                        </div>
                        <div class="imgcolumn">
                            <a href="/timetable">
                                <img src="..\images\home\ttb.jpg" class="gallery_img">
                            </a>
                        </div>
                        <div class="imgcolumn">
                            <a href="/submitrequest">
                                <img src="..\images\home\question.jpg" class="gallery_img">
                            </a>
                        </div>
                        <div class="imgcolumn">
                            <a href="/checkrequest">
                                <img src="..\images\home\reply.jpg" class="gallery_img">
                            </a>
                        </div>
                        <div class="imgcolumn">
                            <a href="/readstudentrequestlist">
                                <img src="..\images\home\approve.jpg" class="gallery_img">
                            </a>
                        </div>
                        <div class="imgcolumn">
                            <a href="/preference">
                                <img src="..\images\home\preference.jpg" class="gallery_img">
                            </a>
                        </div>
                        <div class="imgcolumn">
                            <a onclick="checktimecome()">
                                <img src="..\images\home\canlendar.jpg" class="gallery_img">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
                <%}else if(req.session.role=="adm" ) {%>
                    <p>this is a admin</p>
                    <div class="rows is-mobile">
                        <div class="row">
                            <div class="columns is-multiline is-mobile">
                                <div class="imgcolumn">
                                    <a href="/notice">
                                        <img src="..\images\home\notice.jpg" class="gallery_img">
                                    </a>
                                </div>
                                <div class="imgcolumn">
                                    <a href="/setting">
                                        <img src="..\images\home\admin\setting.png" class="gallery_img">
                                    </a>
                                </div>
                                <div class="imgcolumn">
                                    <a href="/usermanagement">
                                        <img src="..\images\home\admin\Usericon.png" class="gallery_img">
                                    </a>
                                </div>
                                <div class="imgcolumn">
                                    <a href="/Mainclassroommanagement">
                                        <img src="..\images\home\admin\Room.png" class="gallery_img">
                                    </a>
                                </div>
                                <div class="imgcolumn">
                                    <a href="/classmanagement">
                                        <img src="..\images\home\admin\classmanagement.jpg" class="gallery_img">
                                    </a>
                                </div>
                                                                
                                <div class="imgcolumn">
                                    <a onclick="checkhavedraft()">
                                        <img src="..\images\home\admin\CreateSchd.jpg" class="gallery_img">
                                    </a>
                                </div>
                                
                               
                                

                            </div>
                        </div>
                    </div>

                    <%}%>
</div>
<script>
   
   async function checkhavedraft() {
        var response = await fetch("/checkdraft", {
            method: "GET",
        });
        if (response.ok) {
            var msg = await response.json();
            console.log("here !!!!!!! "+msg)
            if (msg == "redirect") {
                console.log("redirect from home")
                location.assign("/supervisorschedulelist");
            } else {
                location.assign("/scheduledesign");
            }
        }else{
            alert("Please finish all setup before you enter to this page");
        }

    }

    async function checktimecome() {
        var response = await fetch("/viewFinalSchedule", {
            method: "GET",
        });

        if (response.ok) {

            location.assign("/viewFinalSchedule");
        }
    }
    async function checkrequestdeadline(rolerole) {

        var response = await fetch("/home", {
            method: "GET",
        });

        if (response.ok) {

            location.assign("/submitrequest");
        }

    }

</script>